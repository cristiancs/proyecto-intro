function index(){console.log("Redireccionando"),page("/dashboard")}function dashboard(){$("#content").load("dashboard.html",function(){apiUpdateTemp("aire"),apiUpdateTemp("agua"),$(".btn-update").click(apiUpdateTemp)})}function air(){$("#menu li").removeClass("active"),$('#menu li[data-action="aire"]').addClass("active"),$("#content").load("air.html",function(){apiUpdateTemp("aire"),$(".btn-update").click(apiUpdateTemp),apiGetGraph({start:addDays(new Date,-1),end:new Date,type:"aire",graphName:"Diaria",of:["temperatura","humedad"]},airGraph),apiGetGraph({start:addDays(new Date,-7),end:new Date,type:"aire",graphName:"Semanal",of:["temperatura","humedad"]},airGraph),apiGetGraph({start:addDays(new Date,-30),end:new Date,type:"aire",graphName:"Mensual",of:["temperatura","humedad"]},airGraph),apiGetGraph({start:addDays(new Date,-365),end:new Date,type:"aire",graphName:"Anual",of:["temperatura","humedad"]},airGraph)})}function water(){$("#menu li").removeClass("active"),$('#menu li[data-action="agua"]').addClass("active"),$("#content").load("water.html",function(){apiUpdateTemp("water"),$(".btn-update").click(apiUpdateTemp),apiGetGraph({start:addDays(new Date,-1),end:new Date,type:"water",graphName:"Diaria",of:["temperatura"]},airGraph),apiGetGraph({start:addDays(new Date,-7),end:new Date,type:"water",graphName:"Semanal",of:["temperatura"]},airGraph),apiGetGraph({start:addDays(new Date,-30),end:new Date,type:"water",graphName:"Mensual",of:["temperatura"]},airGraph),apiGetGraph({start:addDays(new Date,-365),end:new Date,type:"water",graphName:"Anual",of:["temperatura"]},airGraph)})}function addDays(a,e){return a.setDate(a.getDate()+e)}function notfound(){console.log("No existe")}function processUpdate(a,e){console.log(a,e);for(var t in a){$container=$('[data-type="'+e.tipo+'"][data-title="'+t+'"]');for(var r in a[t])$container.find('[data-name="'+r+'"]').html(a[t][r])}}function airGraph(a,e){var t,r,n;console.log(JSON.stringify(a.data));var o=new google.visualization.DataTable(a.data),p={height:500};$Graph=$('[data-name="'+e.graphName+'"] [data-type="'+a.type+'"]')[0],t=new google.charts.Line($Graph),t.draw(o,p)}function apiUpdateTemp(a){console.log(a,$(this).attr("data-type"));var e={};"string"==typeof a?e.tipo=a:e.tipo=$(this).attr("data-type"),socket.emit("updateLast"),$.post("api/updateTemp",e,function(a){processUpdate(a,e)})}function apiGetGraph(a,e){for(var t in a.of)$.post("api/getGraph",{of:a.of[t],args:a},function(t){e(t,a)})}page("/",index),page("/dashboard",dashboard),page("/monitor-air",air),page("/monitor-water",water),page("*",notfound),page(),window.addEventListener("load",function(){window.scrollTo(0,0)});var body=document.documentElement;body.requestFullscreen?body.requestFullscreen():body.webkitrequestFullscreen?body.webkitrequestFullscreen():body.mozrequestFullscreen?body.mozrequestFullscreen():body.msrequestFullscreen&&body.msrequestFullscreen();var socket=io("//temperatura.cristiannavarrete.com:3700/socket.io/socket.io.js");socket.on("updateData",function(a){console.log(a);var e={};e.type=a.type,processUpdate(a.data,e)});